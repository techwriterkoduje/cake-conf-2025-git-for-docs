# Pull Requests (PRs)

This module uses GitHub to demonstrate Pull Requests (PRs). PRs are not a
feature of Git itself but of repository hosting platforms (GitHub, GitLab,
Bitbucket). A PR is a request to merge changes from one branch into another — it
packages commits, shows a diff, and provides a place for discussion and review.

PRs are useful for technical writers and engineers alike:

- They let reviewers read the exact changes and suggest precise edits.
- They act as a discussion thread where context and decisions are recorded.
- They provide a clear handoff point for approvals and merging.

## What a PR does

- Shows the list of commits and a unified diff for the branch.
- Provides a web UI for reviewers to comment on specific lines, suggest changes,
  and approve the work.
- Acts as a gate for automated checks (CI) and human approval before merging.

## Why PRs help writers

- Reviewers can comment inline on phrasing, links, or instructions without
  editing the file directly.
- The "Suggest change" feature lets reviewers propose an exact edit that the
  author can accept with one click.
- The PR timeline records decisions (who approved, what changed) which is
  valuable for audits and handovers.

## Steps in a PR (high level)

1. Create a branch with your changes and push it to GitHub.
2. Open a Pull Request from your branch into the target branch (usually `main`).
3. Add a descriptive title and a short summary of what you changed and why.
4. Request reviewers / assignees.
5. Reviewers add comments or suggestions; author makes changes and updates the
   branch.
6. After approval and passing checks, merge the PR.

## Exercise

Follow these exercises using the branch you created earlier in the workshop (for
example `yourname/docs/add-examples`).

## Create the PR

1. Push your branch if you haven't already:

```
git push --set-upstream origin yourname/docs/add-examples
```

2. On GitHub, go to the repository page. You should see a banner to compare &
   pull request for your recently pushed branch. Click it, or click **Pull
   requests** → **New pull request** and choose your branch as the head and
   `main` as the base.

3. Give the PR a clear title (use the commit convention if you like) and a short
   description of the change and why it's needed. Add reviewers (the instructor
   or repo owner).

### Add comments and suggestions

1. Add at least one comment on a line in a file in the PR (e.g., a suggestion
   about clarifying a sentence). Don't submit it yet!
2. Before submitting the comment, use the **Suggest changes** feature to propose
   an exact edit (GitHub provides a small editor that mutates the file in the
   suggestion).
3. Submit the comment.

### Accept a suggestion and sync locally

1. In the PR UI, accept the suggested change (there is an _Apply suggestion_
   button). When you accept it, GitHub will add a new commit to the PR branch
   that applies the change.
2. Locally, pull the updated branch to get GitHub's commit(s):

```
git fetch
git pull
```

or

```
git pull origin yourname/docs/add-examples
```

You should now see the suggestion commit in `git log` and the file updated in
your working tree.

### Apply comments manually and push

Some comments are not simple suggestions and require manual edits. To practice
this:

1. Add a comment on a different line asking the author to reword a sentence
   (don't use Suggest). Save the comment.
2. Locally, edit the file to apply the requested changes.
3. Stage and commit the change:

```
git add get-your-hands-dirty/intro.md
git commit -m "docs: apply review feedback — clarify intro"
git push
```

You will see the new commit appear in the PR on GitHub.

### Approvals and merge

1. The repo owner (instructor) reviews and approves the PR on GitHub.
2. After approval and passing checks, the repo owner (or you, if allowed) clicks
   _Merge pull request_.
3. Merge options: choose _Create a merge commit_ (preserves history), _Squash
   and merge_ (squashes commits into one), or _Rebase and merge_ (linearizes
   commits). Pick the option that matches your workflow.

### Update local `main`

1. Switch to `main` locally and pull the merged changes:

```
git checkout main
git pull
```

2. Verify the merged changes are present in `get-your-hands-dirty/` files.

---

## 3. Troubleshooting

- You can't merge because of conflicts: GitHub will show a message and block
  merging. Pull the branch locally, resolve conflicts, commit, and push. The PR
  will update automatically.

- Your `git pull` didn't fetch the PR commit after accepting a suggestion:
  ensure you pulled the PR branch (`git pull origin yourname/docs/add-examples`)
  and that your local branch is tracking the correct remote branch.

- Someone else merged or force-pushed the branch: if your local branch diverged
  you'll need to fetch and either rebase or merge to reconcile, then push.

- Approvals missing: check that the requested reviewers were added and that they
  approved the PR in the GitHub UI.

Safe practices

- Use the **Suggest changes** feature for small edits; it keeps history clean
  and is easy to accept.
- If you must force-push, prefer `--force-with-lease` and warn reviewers.
- Leave clear PR descriptions and link to issues or tasks when relevant.
